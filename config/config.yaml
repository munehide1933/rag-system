# config.yaml - RAG ç³»ç»Ÿé…ç½®æ¨¡æ¿

# ============================================
# Qdrant å‘é‡æ•°æ®åº“é…ç½®
# ============================================
qdrant:
  host: "localhost"
  port: 6333
  collection_name: "rag_documents"
  vector_size: 1536  # OpenAI ada-002: 1536, ada-001: 1024
  distance_metric: "Cosine"  # Cosine, Dot, Euclidean

# ============================================
# Embedding é…ç½®
# ============================================
embedding:
  provider: "openai"  # openai, huggingface, local
  model: "text-embedding-ada-002"
  
  # OpenAI API é…ç½®
  api_key_env: "OPENAI_API_KEY"  # ç¯å¢ƒå˜é‡å
  api_base: null  # å¯é€‰ï¼šè‡ªå®šä¹‰ API ç«¯ç‚¹
  
  # æ€§èƒ½é…ç½®
  batch_size: 100  # æ‰¹é‡å¤„ç†å¤§å°
  max_retries: 3
  timeout: 30
  
  # æœ¬åœ°æ¨¡å‹é…ç½®ï¼ˆå¦‚æœ provider: "local"ï¼‰
  # model_path: "models/sentence-transformers"
  # device: "cpu"  # cpu, cuda

# ============================================
# æ–‡æœ¬åˆ†å—é…ç½®
# ============================================
chunking:
  chunk_size: 800        # ç›®æ ‡å—å¤§å°ï¼ˆå­—ç¬¦ï¼‰
  overlap: 150           # é‡å å¤§å°ï¼ˆå­—ç¬¦ï¼‰
  min_chunk_size: 100    # æœ€å°å—å¤§å°
  max_chunk_size: 2000   # æœ€å¤§å—å¤§å°
  respect_sentence: true # æ˜¯å¦å°Šé‡å¥å­è¾¹ç•Œ
  language: "auto"       # auto, zh, en
  
  # å¢å¼ºåŠŸèƒ½ï¼ˆéœ€è¦é¢å¤–åº“ï¼‰
  use_nltk: true         # ä½¿ç”¨ NLTK åˆ†å¥ï¼ˆæ¨èï¼‰
  use_spacy: true        # ä½¿ç”¨ spaCy NLPï¼ˆå¯é€‰ï¼‰
  use_semantic_chunking: false  # è¯­ä¹‰åˆ†å—ï¼ˆå®éªŒæ€§ï¼‰

# ============================================
# æ–‡æœ¬æ¸…æ´—é…ç½®
# ============================================
cleaning:
  remove_headers: true
  remove_footers: true
  remove_page_numbers: true
  min_line_length: 10
  
  # è‡ªå®šä¹‰ç§»é™¤æ¨¡å¼ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰
  custom_patterns:
    - '^Page\s+\d+\s+of\s+\d+$'
    - '^Copyright.*$'
    - '^Â©.*$'
  
  # ç¼–ç æ£€æµ‹
  use_chardet: true      # è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç¼–ç ï¼ˆå¼ºçƒˆæ¨èï¼‰
  default_encoding: "utf-8"

# ============================================
# æ–‡æ¡£åˆ†ç±»é…ç½®
# ============================================
categories:
  - name: "agentic_ai"
    description: "AI Agent å’Œè‡ªä¸»ç³»ç»Ÿç›¸å…³æ–‡æ¡£"
    keywords:
      - "agent"
      - "autonomous"
      - "gpt"
      - "llm"
      - "claude"
      - "langchain"
      - "autogpt"
      - "babyagi"
      - "reasoning"
      - "planning"
    path: "documents/agentic_ai"
    metadata:
      color: "#FF6B6B"
      icon: "ğŸ¤–"
      
  - name: "cs_architecture"
    description: "è®¡ç®—æœºæ¶æ„å’Œç³»ç»Ÿè®¾è®¡"
    keywords:
      - "kubernetes"
      - "docker"
      - "microservice"
      - "aws"
      - "azure"
      - "cloud"
      - "devops"
      - "architecture"
      - "distributed"
      - "scalability"
    path: "documents/cs_architecture"
    metadata:
      color: "#4ECDC4"
      icon: "ğŸ—ï¸"
      
  - name: "machine_learning"
    description: "æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ "
    keywords:
      - "neural network"
      - "deep learning"
      - "tensorflow"
      - "pytorch"
      - "transformer"
      - "cnn"
      - "rnn"
      - "gradient"
      - "training"
      - "model"
    path: "documents/machine_learning"
    metadata:
      color: "#95E1D3"
      icon: "ğŸ§ "
      
  - name: "programming"
    description: "ç¼–ç¨‹è¯­è¨€å’Œå¼€å‘"
    keywords:
      - "python"
      - "javascript"
      - "react"
      - "api"
      - "database"
      - "sql"
      - "algorithm"
      - "data structure"
    path: "documents/programming"
    metadata:
      color: "#F38181"
      icon: "ğŸ’»"
      
  - name: "general"
    description: "é€šç”¨æ–‡æ¡£"
    keywords: []
    path: "documents/general"
    metadata:
      color: "#CCCCCC"
      icon: "ğŸ“„"

# ============================================
# å¤„ç†é…ç½®
# ============================================
processing:
  batch_size: 32         # æ–‡æ¡£æ‰¹å¤„ç†å¤§å°
  max_workers: 4         # å¹¶è¡Œå·¥ä½œçº¿ç¨‹æ•°
  use_multiprocessing: true  # ä½¿ç”¨å¤šè¿›ç¨‹ï¼ˆæ¨èï¼‰
  show_progress: true    # æ˜¾ç¤ºè¿›åº¦æ¡
  
  # æ€§èƒ½ä¼˜åŒ–
  enable_caching: true   # å¯ç”¨ embedding ç¼“å­˜
  cache_dir: "data/cache"
  
  # é”™è¯¯å¤„ç†
  skip_errors: true      # è·³è¿‡é”™è¯¯çš„æ–‡æ¡£
  max_errors: 10         # æœ€å¤§å…è®¸é”™è¯¯æ•°

# ============================================
# æ—¥å¿—é…ç½®
# ============================================
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  file: "logs/rag_system.log"
  
  # æ ¼å¼é…ç½®
  format: "%(asctime)s | %(levelname)-8s | %(name)s | %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"
  
  # è¾“å‡ºé…ç½®
  console_output: true   # è¾“å‡ºåˆ°æ§åˆ¶å°
  colored_output: true   # ä½¿ç”¨å½©è‰²è¾“å‡ºï¼ˆç»ˆç«¯ï¼‰

# ============================================
# é«˜çº§é…ç½®ï¼ˆå¯é€‰ï¼‰
# ============================================

# å…ƒæ•°æ®æå–
metadata:
  extract_entities: true     # æå–å‘½åå®ä½“ï¼ˆéœ€è¦ spaCyï¼‰
  extract_keywords: true     # æå–å…³é”®è¯ï¼ˆéœ€è¦ spaCyï¼‰
  max_keywords: 10           # æœ€å¤§å…³é”®è¯æ•°é‡
  
# æœç´¢é…ç½®
search:
  default_top_k: 5           # é»˜è®¤è¿”å›ç»“æœæ•°
  min_score: 0.7             # æœ€ä½ç›¸ä¼¼åº¦åˆ†æ•°
  enable_reranking: false    # å¯ç”¨é‡æ’åºï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
  
# ç›‘æ§é…ç½®
monitoring:
  enable_metrics: true       # å¯ç”¨æ€§èƒ½ç›‘æ§
  metrics_file: "logs/metrics.json"
  
# å¤‡ä»½é…ç½®
backup:
  enable_auto_backup: false  # è‡ªåŠ¨å¤‡ä»½
  backup_dir: "backups"
  backup_interval: 86400     # å¤‡ä»½é—´éš”ï¼ˆç§’ï¼‰
